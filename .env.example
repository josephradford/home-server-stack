# IMPORTANT: If any value contains a dollar sign ($), it must be escaped as $$
# Example: MyP@$$word123 should be written as MyP@$$$$word123
# This prevents Docker Compose from interpreting $ as a variable reference

# Server Configuration
SERVER_IP=192.168.1.100
TIMEZONE=UTC

# Domain Configuration
# Set your registered domain name (e.g., example.com)
# All services will be accessible via subdomain.DOMAIN (e.g., n8n.example.com)
DOMAIN=example.com

# Let's Encrypt SSL Certificates
# Email for Let's Encrypt certificate notifications
ACME_EMAIL=admin@example.com

# Gandi Personal Access Token (PAT) for DNS-01 Challenge
# Required for Let's Encrypt wildcard certificates
# Note: PATs replaced the old "Production API Key" system
# To obtain:
#   1. Log into https://admin.gandi.net
#   2. Go to: Account Settings → Personal Access Tokens
#      Direct link: https://admin.gandi.net/organizations/account/pat
#   3. Click "Create a token"
#   4. Select your organization
#   5. Give it a name (e.g., "Home Server Traefik")
#   6. Set expiration date (recommend 1 year, then rotate)
#   7. Set permissions: Enable "Manage domain name technical configurations"
#   8. Copy the token immediately (won't be shown again)
# Note: Traefik expects this as GANDIV5_API_KEY environment variable
GANDIV5_PERSONAL_ACCESS_TOKEN=your_gandi_personal_access_token_here

# AdGuard Home Configuration - Network-wide ad blocking and DNS
# Accessible via http://SERVER_IP:8888 (admin interface)
# DNS service on port 53
ADGUARD_USERNAME=admin
ADGUARD_PASSWORD=your_secure_adguard_password

# n8n Configuration - Workflow automation
# Accessible via https://n8n.home.local (Traefik handles SSL)
N8N_USER=admin
N8N_PASSWORD=your_secure_password_here

# n8n Performance and Future Compatibility
DB_SQLITE_POOL_SIZE=5
N8N_RUNNERS_ENABLED=true
N8N_BLOCK_ENV_ACCESS_IN_NODE=false
N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true
N8N_RUNNERS_TASK_TIMEOUT=1800
EXECUTIONS_TIMEOUT=1800
EXECUTIONS_TIMEOUT_MAX=3600

# Traefik Configuration - Reverse proxy dashboard
# Dashboard accessible via https://traefik.DOMAIN
# Username is always 'admin', password set below
TRAEFIK_PASSWORD=your_secure_traefik_password

# Monitoring Configuration
GRAFANA_PASSWORD=your_secure_grafana_password

# AlertManager Configuration
WEBHOOK_URL=http://127.0.0.1:5001/
ALERT_EMAIL_FROM=alerts@homeserver.local
ALERT_EMAIL_USER=alerts@your-domain.com
ALERT_EMAIL_PASS=your_email_app_password
ALERT_EMAIL_TO=admin@your-domain.com

# WireGuard VPN Configuration
# NOTE: WireGuard is now installed as a system service (not Docker)
# This prevents VPN disconnection when Docker services are restarted
# Installation: sudo ./scripts/install-wireguard.sh
# Configuration stored in: /etc/wireguard/wg0.conf
# Peer configs stored in: data/wireguard/peers/
WIREGUARD_PORT=51820
WIREGUARD_SUBNET=10.13.13.0/24
# CRITICAL: Split tunneling - only route home network traffic through VPN
# DO NOT use 0.0.0.0/0 unless you want full tunneling (not recommended for security)
# This ensures only home network (192.168.1.0/24) and VPN subnet (10.13.13.0/24) traffic routes through VPN
WIREGUARD_ALLOWEDIPS=192.168.1.0/24,10.13.13.0/24

# =============================================================================
# DASHBOARD CONFIGURATION
# =============================================================================

# BOM Weather (Australian Bureau of Meteorology)
# Location search by suburb name
# Uses the weather-au library which accesses BOM's official API
# Provides comprehensive weather data:
#   - Current observations (temp, feels like, wind, rain, humidity)
#   - 7-day daily forecast (temps, rain, UV, sunrise/sunset, fire danger)
#   - 16x 3-hourly forecast (detailed hourly conditions)
#   - Next rain forecast
#
# Examples: "parramatta", "sydney", "melbourne", "brisbane"
# The API will find the best matching location and nearest observation station automatically
BOM_LOCATION=parramatta

# Homepage Dashboard - User/Group IDs for file permissions
# PUID: Your user ID (run `id -u` to get this)
# Default: 1000 (first non-root user on most Linux systems)
PUID=1000

# PGID: IMPORTANT - Must match docker group GID for container stats to work
# Run `getent group docker | cut -d: -f3` to get the docker group GID on your system
# On most Linux systems this is NOT 1000 (typically 999, 998, 994, or similar)
# If Homepage shows "unknown" status for containers, this is likely the issue
PGID=1000

# Homepage Dashboard - Allowed Hosts (Host Header Validation)
# Leave empty to allow all hosts (recommended for trusted home networks)
# Or set to specific IPs/hostnames: "192.168.1.100,192.168.1.101,localhost"
HOMEPAGE_ALLOWED_HOSTS=

# Grafana - Dashboard username
# Default: admin (standard Grafana default)
GRAFANA_USERNAME=admin

# Transport NSW API - Real-time public transport data
# Get your API key from: https://opendata.transport.nsw.gov.au/
TRANSPORT_NSW_API_KEY=your_api_key_here

# Transport Stop IDs (find at https://transportnsw.info/)
# Example: North Parramatta Station - Platform 1
TRANSPORT_STOP_1_ID=10101323
TRANSPORT_STOP_1_NAME="North Parra Platform 1"
TRANSPORT_STOP_1_ICON=mdi-train

# Example: Bus Stop
TRANSPORT_STOP_2_ID=2093XX
TRANSPORT_STOP_2_NAME="Bus Stop - Church St"
TRANSPORT_STOP_2_ICON=mdi-bus

# Add more stops as needed (STOP_3, STOP_4, etc.)

# Google Calendar Integration
# Get iCal URL from: Google Calendar > Settings > Integrate calendar > "Secret address in iCal format"
#
# IMPORTANT: Use the PRIVATE iCal URL, not the public or embed URL
# Format: https://calendar.google.com/calendar/ical/[CALENDAR_ID]/private-[TOKEN]/basic.ics
#
# Common mistakes:
# ❌ Embed URL: .../calendar/embed?src=...
# ❌ Public URL without private token: .../public/basic.ics (only works if calendar is public)
# ✅ Private URL: .../private-XXXXX/basic.ics
#
# To get the correct URL:
# 1. Open Google Calendar > Click 3 dots next to your calendar > Settings and sharing
# 2. Scroll to "Integrate calendar" section
# 3. Copy "Secret address in iCal format"
GOOGLE_CALENDAR_ICAL_URL=https://calendar.google.com/calendar/ical/your_calendar_id%40group.calendar.google.com/private-your_token/basic.ics

# TomTom API - Real-time traffic data and geocoding
# Get your API key from: https://developer.tomtom.com/
# Free tier: 2,500 requests/day
TOMTOM_API_KEY=your_tomtom_api_key_here

# Traffic Routes Configuration
# Schedule format: "Mon-Fri 07:00-09:00" or "Daily 00:00-23:59"

# Route 1: Morning Commute
TRAFFIC_ROUTE_1_NAME="Morning Commute"
TRAFFIC_ROUTE_1_ORIGIN="123 Your Street, North Parramatta NSW 2151"
TRAFFIC_ROUTE_1_DESTINATION="456 Work Street, Sydney NSW 2000"
TRAFFIC_ROUTE_1_SCHEDULE="Mon-Fri 07:00-09:00"

# Route 2: Evening Commute
TRAFFIC_ROUTE_2_NAME="Evening Commute"
TRAFFIC_ROUTE_2_ORIGIN="456 Work Street, Sydney NSW 2000"
TRAFFIC_ROUTE_2_DESTINATION="123 Your Street, North Parramatta NSW 2151"
TRAFFIC_ROUTE_2_SCHEDULE="Mon-Fri 17:00-19:00"

# Add more routes as needed (ROUTE_3, ROUTE_4, etc.)

# Home Assistant Configuration - Location tracking and home automation
# Accessible via http://SERVER_IP:8123 (direct) or https://home.DOMAIN (Traefik)
#
# HOMEASSISTANT_URL: Internal URL for Homepage API and widget communication
# Default: http://homeassistant:8123 (container name, used internally)
HOMEASSISTANT_URL=http://homeassistant:8123
#
# HOMEASSISTANT_TOKEN: Long-lived access token for Homepage dashboard widget
# Generate after first setup:
#   1. Complete Home Assistant onboarding at http://SERVER_IP:8123
#   2. Click your profile (bottom left)
#   3. Scroll to "Long-Lived Access Tokens"
#   4. Click "Create Token"
#   5. Name it "Homepage Dashboard"
#   6. Copy the token and paste below
#   7. Restart Homepage: make restart
#
# Leave empty initially - will be generated after Home Assistant setup
HOMEASSISTANT_TOKEN=

# Actual Budget Configuration - Self-hosted personal finance and budgeting
# Accessible via https://actual.DOMAIN (Traefik with VPN/local access only)
#
# Actual Budget is a privacy-focused budgeting app with bank sync, mobile apps, and local data storage.
# No configuration required - service is secured by Traefik's admin-secure middleware.
# Data is stored in ./data/actualbudget/ and persisted across container restarts.
#
# First-time setup:
#   1. Access https://actual.DOMAIN after deployment
#   2. Create your budget file
#   3. Optional: Set up bank sync (SimpleFIN, GoCardless)
#   4. Optional: Install mobile apps (iOS/Android) and connect to server
#
# Optional environment variables (uncomment if needed):
# ACTUAL_PORT=5006  # Default port (already configured in docker-compose.yml)
# ACTUAL_UPLOAD_FILE_SYNC_SIZE_LIMIT_MB=20  # File sync size limit
# ACTUAL_UPLOAD_SYNC_ENCRYPTED_FILE_SYNC_SIZE_LIMIT_MB=50  # Encrypted file sync limit
# ACTUAL_UPLOAD_FILE_SIZE_LIMIT_MB=100  # General file upload limit

# Mealie Configuration - Self-hosted meal planner and recipe manager
# Accessible via https://mealie.DOMAIN (Traefik with VPN/local access only)
#
# Mealie is a self-hosted recipe manager and meal planner with a RestAPI backend
# and a reactive frontend application built with Vue.js.
# Features include recipe management, meal planning, shopping lists, and more.
#
# No additional configuration required - service is secured by Traefik's admin-secure middleware.
# Uses SQLite database by default for simplicity (suitable for 1-20 users).
# Data is stored in ./data/mealie/ and persisted across container restarts.
#
# Default credentials: changeme@example.com / MyPassword
# IMPORTANT: Change the default credentials after first login!
#
# First-time setup:
#   1. Access https://mealie.DOMAIN after deployment
#   2. Login with default credentials (changeme@example.com / MyPassword)
#   3. Go to User Profile > Change Password and update your password
#   4. Go to User Profile > Change Email and update your email
#   5. Optional: Configure additional users (signup is disabled by default)
#   6. Optional: Import recipes via URL or manually
#   7. Optional: Set up meal planning and shopping lists
#   8. Optional: Configure webhooks for integration with other services
#
# Features:
#   - Recipe management with image support and tags
#   - Meal planning calendar with drag-and-drop interface
#   - Automatic shopping list generation from meal plans
#   - Recipe import from URLs (supports 1000+ websites)
#   - Cooking mode with step-by-step instructions
#   - Mobile-responsive web interface
#   - RESTful API for integrations
#   - Multi-user support with permissions
#   - Recipe sharing between users
#   - Bulk recipe import/export
#
# Mobile apps:
#   - iOS: Available on App Store (search "Mealie")
#   - Android: Available on Google Play (search "Mealie")
#
# Optional environment variables (already configured in docker-compose.yml):
# BASE_URL=https://mealie.DOMAIN  # Base URL for the application
# ALLOW_SIGNUP=false  # Disable public registration (security)
# DB_ENGINE=sqlite  # Database engine (sqlite or postgres)
# MAX_WORKERS=1  # Number of Gunicorn workers (1 for low-resource systems)
# WEB_CONCURRENCY=1  # Number of concurrent web processes
